<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="shortcut icon" href="/imgs/dots.ico"/><meta name="google-site-verification" content="Ud8J6A_ISBf4lwJLP8q98U-YENsJ9-7fd8TJ8KB8iFg"/><title>자바스크립트 클로저 이해하고 가자.</title><meta name="description" content="클로저, 폐쇄적이고 안전환 환경에서 코딩할 수 있는 좋은 방법!"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta property="og:title" content="자바스크립트 클로저 이해하고 가자."/><meta property="og:type" content="website"/><meta property="og:url" content="www.google.com"/><meta property="og:image" content="https://cobb-dev-backend-u8nfg.ondigitalocean.app/uploads/javascript_d5e1b2cbfb.png"/><meta property="og:article:author" content="Cobb.dev"/><meta name="next-head-count" content="11"/><link rel="preload" href="/_next/static/css/9fa98fe4c7abcc75.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9fa98fe4c7abcc75.css" data-n-g=""/><link rel="preload" href="/_next/static/css/a3631b8d32627eff.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a3631b8d32627eff.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-576c35162a944d06.js" defer=""></script><script src="/_next/static/chunks/framework-4bae2c966b0001c5.js" defer=""></script><script src="/_next/static/chunks/main-fb738ca365f56f5f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-545c970480c84ac9.js" defer=""></script><script src="/_next/static/chunks/226-714725af8d48dcb3.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-fd89360f8cbbc19a.js" defer=""></script><script src="/_next/static/hWHXZa15yeQwUVTbr79R5/_buildManifest.js" defer=""></script><script src="/_next/static/hWHXZa15yeQwUVTbr79R5/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="progressBar_scrollProgress__2vCVA"><div class="progressBar_progressWidth__YgYvL" style="width:0%"></div></div><header class="header_headerComponent__ynBfW"><div class="header_headerIcon__DaRnS"><button type="button"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2720%27%20height=%2720%27/%3e"/></span><img alt="Cobb Logo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Cobb Logo" srcSet="/_next/image?url=%2Fimgs%2Fdots.png&amp;w=32&amp;q=75 1x, /_next/image?url=%2Fimgs%2Fdots.png&amp;w=48&amp;q=75 2x" src="/_next/image?url=%2Fimgs%2Fdots.png&amp;w=48&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span>코브</span></button></div><div class="header_hamburgerContainer__Ar_Ib"><style data-emotion="css 1wf493t">.css-1wf493t{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1wf493t:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1wf493t:hover{background-color:transparent;}}.css-1wf493t.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css 1yxmbwk">.css-1yxmbwk{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1yxmbwk::-moz-focus-inner{border-style:none;}.css-1yxmbwk.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1yxmbwk{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1yxmbwk:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1yxmbwk:hover{background-color:transparent;}}.css-1yxmbwk.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium css-1yxmbwk" tabindex="0" type="button" aria-label="sidebar-open"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button><style data-emotion="css 1e2dcm1">.css-1e2dcm1{z-index:1500;pointer-events:none;}</style><style data-emotion="css okvapm">.css-okvapm{z-index:1500;pointer-events:none;}</style></div></header><main class="layout_globalLayout__Cqhbc"><div class="blog_container__H__d1"><div class="blog_header__8Zidt"><p class="blog_tag__rPlrG">JavaScript</p><h1>자바스크립트 클로저 이해하고 가자.</h1><p class="blog_publishedDate__sfuIu">Published at <!-- -->Nov 22, 2022 6:27 PM</p></div><main class="markdown-body"><div class="markdown_markdown__O9xQu"><p><img src="https://cobb-dev-backend-u8nfg.ondigitalocean.app/uploads/Closure_064a6eacfc.png" alt="Closure.png"/></p>
<h1>Closure ( 클로저 )</h1>
<h2>클로저란?</h2>
<p>함수와 함수가 선언된 환경의 관계입니다 (자신이 선언될 때의 환경을 기억하는 함수). Closure는 <code>폐쇄</code>를 의미합니다. 그럼 설명을 통해 왜 Closure가 Closure(폐쇄)로 불리는지 알아보겠습니다.</p>
<h2>클로저를 사용하는 이유?</h2>
<p>스코프를 이용해서 접근할 수 없는 환경을 만들 때 사용합니다.</p>
<p>그럼, 코드를 통해 예시를 보겠습니다.</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-js" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// 클로저를 만드는 형태</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">function</span><span> </span><span class="token" style="color:#dcdcaa">outerFn</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">let</span><span> x </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">10</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#569CD6">function</span><span> </span><span class="token" style="color:#dcdcaa">innerFn</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">y</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> 
</span><span>    </span><span class="token" style="color:#c586c0">return</span><span> x </span><span class="token" style="color:#d4d4d4">=</span><span> x </span><span class="token" style="color:#d4d4d4">+</span><span> y</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">let</span><span> a </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">outerFn</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span> 
</span>
<span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#dcdcaa">a</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">5</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#6a9955">// 15</span><span>
</span><span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#dcdcaa">a</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">5</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#6a9955">// 20</span></code></div></pre>
<p>이 코드는 어떻게 클로저 형태를 만들까요? <code>let a = outerFn();</code> 코드를 보겠습니다.</p>
<p>변수 <code>a</code>는 <code>outerFn()</code>을 할당받았습니다. <code>outerFn()</code>은 <code>innerFn()</code>을 반환합니다. 그럼 <code>innerFn()</code>은 무슨 동작을 할까요?</p>
<p><code>x</code>를 외부 스코프에서 받고, <code>x</code>의 값을 <code>x + y</code>의 값으로 할당합니다.</p>
<blockquote>
<p><code>outerFn()</code>이 <code>arugument(인자)</code>를 받지 않습니다. 원래라면 <code>outerFn(y)</code>로 작성해야 되는 게 아닌가요?</p>
</blockquote>
<p>라고 생각하실 수 있습니다.</p>
<p><code>console.log(a(5))</code>가 가능한 이유는 <code>변수 a</code>가 <code>outerFn()</code>을 할당받았고, <code>outerFn()</code>의 <code>리턴 값</code>은 <code>innerFy()</code>이기 때문입니다. 그래서 <code>innerFy(y)</code>로 인자를 전달해줄 수 있게 됩니다.</p>
<p>이런 형태의 함수를 봤을 때, 외부 스코프에서 <code>outerFn()</code> 스코프 안에 있는 <code>x</code>의 값에 접근해 값을 조작할 수 있을까요?</p>
<p><strong>없습니다.</strong> 이게 클로저의 한 형태입니다. <code>x</code>에 접근할 수 없는 환경을 만들고, <code>x</code>값을 은닉시키고 재사용할 수 있게 만드는 거죠.</p>
<h3>또 하나 알아야 할 게 있습니다.</h3>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-js" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#dcdcaa">a</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">5</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#6a9955">// 15</span><span>
</span><span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#dcdcaa">a</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">5</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#6a9955">// 20</span></code></div></pre>
<p>어떻게 같은 <code>15</code>라는 같은 결과가 나오지 않고, 두 번째 호출했을 땐 <code>15</code>에서 <code>5</code>를 더한 20이 나오게 됐을 까요?</p>
<p>원래라면 함수가 실행되고 종료되면 변수가 초기값인 <code>10</code>으로 초기화 되어 두 번째 호출시에도 <code>15</code>가 출력돼야 할 것 같은데 말입니다.</p>
<p>마치 react에서 <code>setState((prev) =&gt; prev + 5)</code> 와 같은 코드처럼 작동하고 있습니다.</p>
<p>이렇게 x값이 누적될 수 있는 이유는 바로</p>
<p><code>let a = outerFn();</code> 로 작성된 코드 때문입니다.</p>
<p>최상위 스코프에서 <code>outerFn()</code>을 계속 <code>변수 a</code>가 할당받고 있는 형태입니다.</p>
<p>그렇기 때문에 함수 호출이 끝나도 a가 메모리에서 제거되지 않습니다.</p>
<p>클로저를 이해하기 위해선 가비지 컬렉션에 대한 약간의 이해가 필요합니다.</p>
<h2>가비지 컬렉션</h2>
<p>함수 호출이 끝나면 함수에 대응하는 렉시컬 환경이 메모리에서 제거됩니다.</p>
<blockquote>
<p>가바지 컬렉터: 이거 실행 했으니까 이제 필요없죠?? 메모리 낭비니까 가져다가 버립니다??</p>
</blockquote>
<p><strong>자바스크립트에서 모든 객체는 도달 가능한 상태일 때만 메모리에 유지됩니다.</strong></p>
<p>(위의 예제는 <code>let a = outerFn()</code> 이 <code>outerFn()</code> 을 항상 도달 가능한 상태로 만듭니다.)</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-jsx" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// 위 예제와 똑같은 형태지만, 도달이 불가능한 객체 설명을 위한 코드블록.</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">function</span><span> </span><span class="token" style="color:#dcdcaa">f</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">let</span><span> value </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">123</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#569CD6">function</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#dcdcaa">alert</span><span class="token" style="color:#d4d4d4">(</span><span>value</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">let</span><span> g </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">f</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#6a9955">// g가 f()를 계속 참조하기 때문에 메모리에 유지됩니다.</span><span>
</span>
<span>g </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token null nil" style="color:#569CD6">null</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#6a9955">// g가 더이상 함수를 참조하지 않기 때문에 f()는 메모리에서 삭제됩니다.</span></code></div></pre>
<h2>클로저 장점</h2>
<p>데이터 보존이 가능합니다.</p>
<p>첫 번째 <code>console.log(a(5))</code> 가 끝나도 <code>let a</code> 가 할당받은 <code>outerFn()</code> ===  <code>innerFn(y)</code> 이 외부 스코프에 있는 <code>x</code> 를 참조하고 있기 때문에 함수 실행이 종료되도 <code>x</code> 는 초기값인 <code>10</code> 으로 돌아오지 않는다.</p>
<p>정보 접근을 제한할 수 있습니다.</p>
<p>참조할 수 없는 변수(위의 예제에서는 <code>let x = 10</code> 으로 선언된 <code>x의 값</code> )를 사용해 클로저를 이용한 제한적 접근을 제외한 모든 경우의 수를 차단할 수 있다. 이 과정을 <code>은닉화</code>라고 표현합니다.</p>
<h2>우리가 자주 사용하는 useState의 원리도 클로저</h2>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-js" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">function</span><span> </span><span class="token" style="color:#dcdcaa">counter</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>	</span><span class="token" style="color:#569CD6">let</span><span> num </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>	</span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#569CD6">function</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>		</span><span class="token" style="color:#c586c0">return</span><span> num</span><span class="token" style="color:#d4d4d4">++</span><span>
</span><span>	</span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">const</span><span> increase </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">counter</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#dcdcaa">increase</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#6a9955">// 1</span><span>
</span><span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#dcdcaa">increase</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#6a9955">// 2</span><span>
</span><span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#dcdcaa">increase</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#6a9955">// 3</span><span>
</span>
<span></span><span class="token" style="color:#d4d4d4">==</span><span class="token" style="color:#569CD6">=&gt;</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>num</span><span class="token" style="color:#d4d4d4">,</span><span> setNum</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">useState</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span>num</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#6a9955">// 0, 1, 2, 3</span><span>
</span>
<span></span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#dcdcaa">setState</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">prev</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> prev </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#6a9955">// 한번 실행</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#dcdcaa">setState</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">prev</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> prev </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#6a9955">// 두번 실행</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#dcdcaa">setState</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">prev</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> prev </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#6a9955">// 세번 실행</span></code></div></pre>
<h2>맺으며</h2>
<p>클로저는 역시 어렵습니다. 자주 사용하게 되는 개념일까..? 생각해도 아닌 것 같고.. 그렇다고 모르면 또 안 될 거 같은 개념이네요 ㅎㅎ 클로저 같은 헷갈리는 개념을 이해할 땐 저처럼 직접 설명하듯 작성하는게 최고라는 생각이 드네요.</p>
<p>나중에 프로덕션 레벨에서 일할땐 정보의 은닉화가 중요할 때가 분명 있을 것 같단 생각이 듭니다. 지금 잘 배워서 나중에 중요한 변수 꼼꼼히 숨겨놓아야겠습니다!</p></div></main></div></main><footer class="footer_footer__HjUou"><div class="footer_left__mL1Sl">ⓒ Cobb reserves all rights.</div><div class="footer_right__qHbAS"><a target="_blank" href="https://www.instagram.com/sinsastation/" rel="noopener noreferrer" aria-label="Open Instagram" class=""><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="InstagramIcon"><path d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg></a><style data-emotion="css 1e2dcm1">.css-1e2dcm1{z-index:1500;pointer-events:none;}</style><style data-emotion="css okvapm">.css-okvapm{z-index:1500;pointer-events:none;}</style><a target="_blank" href="https://github.com/usernamechiho" rel="noopener noreferrer" class="footer_github__DYALI" aria-label="Open Github"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="GitHubIcon"><path d="M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"></path></svg></a><style data-emotion="css 1e2dcm1">.css-1e2dcm1{z-index:1500;pointer-events:none;}</style><style data-emotion="css okvapm">.css-okvapm{z-index:1500;pointer-events:none;}</style></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"data":{"id":3,"attributes":{"title":"자바스크립트 클로저 이해하고 가자.","content":"![Closure.png](https://cobb-dev-backend-u8nfg.ondigitalocean.app/uploads/Closure_064a6eacfc.png)\n\n# Closure ( 클로저 )\n\n## 클로저란?\n\n함수와 함수가 선언된 환경의 관계입니다 (자신이 선언될 때의 환경을 기억하는 함수). Closure는 `폐쇄`를 의미합니다. 그럼 설명을 통해 왜 Closure가 Closure(폐쇄)로 불리는지 알아보겠습니다.\n\n## 클로저를 사용하는 이유?\n\n스코프를 이용해서 접근할 수 없는 환경을 만들 때 사용합니다.\n\n그럼, 코드를 통해 예시를 보겠습니다.\n\n```js\n// 클로저를 만드는 형태\n\nfunction outerFn() {\n  let x = 10;\n\n  return function innerFn(y) { \n    return x = x + y;\n  }\n}\n\nlet a = outerFn(); \n\nconsole.log(a(5)) // 15\nconsole.log(a(5)) // 20\n```\n\n이 코드는 어떻게 클로저 형태를 만들까요? `let a = outerFn();` 코드를 보겠습니다.\n\n변수 `a`는 `outerFn()`을 할당받았습니다. `outerFn()`은 `innerFn()`을 반환합니다. 그럼 `innerFn()`은 무슨 동작을 할까요?\n\n`x`를 외부 스코프에서 받고, `x`의 값을 `x + y`의 값으로 할당합니다.\n\n\u003e `outerFn()`이 `arugument(인자)`를 받지 않습니다. 원래라면 `outerFn(y)`로 작성해야 되는 게 아닌가요?\n\n라고 생각하실 수 있습니다.\n\n`console.log(a(5))`가 가능한 이유는 `변수 a`가 `outerFn()`을 할당받았고, `outerFn()`의 `리턴 값`은 `innerFy()`이기 때문입니다. 그래서 `innerFy(y)`로 인자를 전달해줄 수 있게 됩니다.\n\n이런 형태의 함수를 봤을 때, 외부 스코프에서 `outerFn()` 스코프 안에 있는 `x`의 값에 접근해 값을 조작할 수 있을까요?\n\n**없습니다.** 이게 클로저의 한 형태입니다. `x`에 접근할 수 없는 환경을 만들고, `x`값을 은닉시키고 재사용할 수 있게 만드는 거죠.\n\n### 또 하나 알아야 할 게 있습니다.\n\n```js\nconsole.log(a(5)) // 15\nconsole.log(a(5)) // 20\n```\n\n어떻게 같은 `15`라는 같은 결과가 나오지 않고, 두 번째 호출했을 땐 `15`에서 `5`를 더한 20이 나오게 됐을 까요?\n\n원래라면 함수가 실행되고 종료되면 변수가 초기값인 `10`으로 초기화 되어 두 번째 호출시에도 `15`가 출력돼야 할 것 같은데 말입니다.\n\n마치 react에서 `setState((prev) =\u003e prev + 5)` 와 같은 코드처럼 작동하고 있습니다.\n\n이렇게 x값이 누적될 수 있는 이유는 바로\n\n`let a = outerFn();` 로 작성된 코드 때문입니다.\n\n최상위 스코프에서 `outerFn()`을 계속 `변수 a`가 할당받고 있는 형태입니다.\n\n그렇기 때문에 함수 호출이 끝나도 a가 메모리에서 제거되지 않습니다.\n\n클로저를 이해하기 위해선 가비지 컬렉션에 대한 약간의 이해가 필요합니다.\n\n## 가비지 컬렉션\n\n함수 호출이 끝나면 함수에 대응하는 렉시컬 환경이 메모리에서 제거됩니다.\n\n\u003e 가바지 컬렉터: 이거 실행 했으니까 이제 필요없죠?? 메모리 낭비니까 가져다가 버립니다??\n\n**자바스크립트에서 모든 객체는 도달 가능한 상태일 때만 메모리에 유지됩니다.**\n\n(위의 예제는 `let a = outerFn()` 이 `outerFn()` 을 항상 도달 가능한 상태로 만듭니다.)\n\n```jsx\n// 위 예제와 똑같은 형태지만, 도달이 불가능한 객체 설명을 위한 코드블록.\n\nfunction f() {\n  let value = 123;\n\n  return function() {\n    alert(value);\n  }\n}\n\nlet g = f();\n// g가 f()를 계속 참조하기 때문에 메모리에 유지됩니다.\n\ng = null;\n// g가 더이상 함수를 참조하지 않기 때문에 f()는 메모리에서 삭제됩니다.\n```\n\n## 클로저 장점\n\n데이터 보존이 가능합니다.\n\n첫 번째 `console.log(a(5))` 가 끝나도 `let a` 가 할당받은 `outerFn()` ===  `innerFn(y)` 이 외부 스코프에 있는 `x` 를 참조하고 있기 때문에 함수 실행이 종료되도 `x` 는 초기값인 `10` 으로 돌아오지 않는다.\n\n정보 접근을 제한할 수 있습니다.\n\n참조할 수 없는 변수(위의 예제에서는 `let x = 10` 으로 선언된 `x의 값` )를 사용해 클로저를 이용한 제한적 접근을 제외한 모든 경우의 수를 차단할 수 있다. 이 과정을 `은닉화`라고 표현합니다.\n\n## 우리가 자주 사용하는 useState의 원리도 클로저\n\n```js\nfunction counter() {\n\tlet num = 0;\n\n\treturn function() {\n\t\treturn num++\n\t}\n}\n\nconst increase = counter()\n\nconsole.log(increase()) // 1\nconsole.log(increase()) // 2\nconsole.log(increase()) // 3\n\n===\u003e\n\nconst [num, setNum] = useState(0);\n\nconsole.log(num) // 0, 1, 2, 3\n\n() =\u003e { setState((prev) =\u003e prev + 1) } // 한번 실행\n() =\u003e { setState((prev) =\u003e prev + 1) } // 두번 실행\n() =\u003e { setState((prev) =\u003e prev + 1) } // 세번 실행\n```\n\n## 맺으며\n클로저는 역시 어렵습니다. 자주 사용하게 되는 개념일까..? 생각해도 아닌 것 같고.. 그렇다고 모르면 또 안 될 거 같은 개념이네요 ㅎㅎ 클로저 같은 헷갈리는 개념을 이해할 땐 저처럼 직접 설명하듯 작성하는게 최고라는 생각이 드네요.\n\n나중에 프로덕션 레벨에서 일할땐 정보의 은닉화가 중요할 때가 분명 있을 것 같단 생각이 듭니다. 지금 잘 배워서 나중에 중요한 변수 꼼꼼히 숨겨놓아야겠습니다!","subtitle":"클로저, 폐쇄적이고 안전환 환경에서 코딩할 수 있는 좋은 방법!","createdAt":"2022-11-22T09:26:56.944Z","updatedAt":"2022-11-26T18:20:13.109Z","publishedAt":"2022-11-22T09:27:03.353Z","thumbnail":{"data":{"id":4,"attributes":{"name":"javascript.png","alternativeText":null,"caption":null,"width":500,"height":300,"formats":{"thumbnail":{"ext":".png","url":"/uploads/thumbnail_javascript_d5e1b2cbfb.png","hash":"thumbnail_javascript_d5e1b2cbfb","mime":"image/png","name":"thumbnail_javascript.png","path":null,"size":7.59,"width":245,"height":147}},"hash":"javascript_d5e1b2cbfb","ext":".png","mime":"image/png","size":10.54,"url":"/uploads/javascript_d5e1b2cbfb.png","previewUrl":null,"provider":"local","provider_metadata":null,"createdAt":"2022-11-21T09:38:48.983Z","updatedAt":"2022-11-21T09:38:48.983Z"}}},"tag":{"data":{"id":2,"attributes":{"tag":"JavaScript","createdAt":"2022-11-21T09:37:13.012Z","updatedAt":"2022-11-21T09:37:42.502Z","publishedAt":"2022-11-21T09:37:42.498Z"}}}}},"meta":{}}},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"3"},"buildId":"hWHXZa15yeQwUVTbr79R5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>